<div
  class="register-container section_purple"
>
  <div class="form">
    <div class="left-side-image-form">
    </div>
    <form
      [formGroup]="registerForm"
      #form="ngForm"
      (ngSubmit)="onSubmit()"
      class="card"
    >
          <div class="form-element">
            <label>Username</label>
            <input
              formControlName="userName"
              type="text"
              [ngClass]="
                (registerForm.get('userName')?.dirty || form.submitted) &&
                !registerForm.get('userName')?.valid
                  ? 'is-invalid'
                  : ''
              "
            />
            <ng-container
              *ngIf="(registerForm.get('userName')?.dirty || form.submitted) && !registerForm.get('userName')?.valid && !registerForm.get('userName')?.errors?.['serverError']"
            >
              <div class="invalid-feedback">
                {{
                  registerForm.get("userName")?.hasError("required")
                    ? "User name is required!"
                    : "User name maximum length is 15 characters!"
                }}
              </div>
            </ng-container>
            <ng-container
              *ngIf="registerForm.get('userName')?.errors?.['serverError']"
            >
              <div style="color: #dc3545; font-size: 0.875em">
                {{registerForm.get('userName')?.errors?.['serverError']}}
              </div>
            </ng-container>
          </div>
          <div class="form-element">
            <label>Password</label>
            <input
              formControlName="userPassword"
              type="password"
              [ngClass]="
                (registerForm.get('userPassword')?.dirty || form.submitted) &&
                !registerForm.get('userPassword')?.valid
                  ? 'is-invalid'
                  : ''
              "
            />
            <ng-container
              *ngIf="
                (registerForm.get('userPassword')?.dirty || form.submitted) &&
                !registerForm.get('userPassword')?.valid
              "
            >
              <div class="invalid-feedback">
                {{
                  registerForm.get("userPassword")?.hasError("required")
                    ? "User password is required!"
                    : "Password must contain min. 8 characters including one character each: special character, uppercase,number."
                }}
              </div>
            </ng-container>
          </div>
          <div class="form-element">
            <label >Confirm password</label>
            <input
              formControlName="userPasswordConfirmed"
              type="password"
              [ngClass]="
                (registerForm.get('userPasswordConfirmed')?.dirty ||
                  form.submitted) &&
                !registerForm.get('userPasswordConfirmed')?.valid
                  ? 'is-invalid'
                  : ''
              "
            />
            <ng-container>
              <div class="invalid-feedback">
                {{
                  registerForm
                    .get("userPasswordConfirmed")
                    ?.hasError("required")
                    ? "This field is required!"
                    : "Must match!"
                }}
              </div>
            </ng-container>
          </div>
          <div class="form-element">
            <label >Email</label>
            <input
              formControlName="email"
              type="email"
              [ngClass]="
                (registerForm.get('email')?.dirty || form.submitted) &&
                !registerForm.get('email')?.valid
                  ? 'is-invalid'
                  : ''
              "
            />
            <ng-container
              *ngIf="(registerForm.get('email')?.dirty || form.submitted) && !registerForm.get('email')?.valid && !registerForm.get('email')?.errors?.['serverError']"
            >
              <div class="invalid-feedback">
                {{
                  registerForm.get("email")?.hasError("required")
                    ? "Email is required"
                    : "Incorrect format!"
                }}
              </div>
            </ng-container>
            <ng-container
              *ngIf="registerForm.get('email')?.errors?.['serverError']"
            >
              <div style="color: #dc3545; font-size: 0.875em">
                {{registerForm.get('email')?.errors?.['serverError']}}
              </div>
            </ng-container>
          </div>
        <div formGroupName="personalData">
          <div class="form-element">
            <label >Name</label>
            <input
              formControlName="name"
              type="text"
              [ngClass]="
                (registerForm.get('personalData.name')?.dirty ||
                  form.submitted) &&
                !registerForm.get('personalData.name')?.valid
                  ? 'is-invalid'
                  : ''
              "
            />
            <ng-container
              *ngIf="
                (registerForm.get('personalData.name')?.dirty ||
                  form.submitted) &&
                !registerForm.get('personalData.name')?.valid
              "
            >
              <div class="invalid-feedback">
                {{
                  registerForm.get("personalData.name")?.hasError("required")
                    ? "Name is required"
                    : "Maximum length is 15 characters!"
                }}
              </div>
            </ng-container>
          </div>
          <div class="form-element">
            <label >Surname</label>
            <input
              formControlName="surname"
              type="text"
              [ngClass]="
                (registerForm.get('personalData.surname')?.dirty ||
                  form.submitted) &&
                !registerForm.get('personalData.surname')?.valid
                  ? 'is-invalid'
                  : ''
              "
            />
            <ng-container
              *ngIf="
                (registerForm.get('personalData.surname')?.dirty ||
                  form.submitted) &&
                !registerForm.get('personalData.surname')?.valid
              "
            >
              <div class="invalid-feedback">
                {{
                  registerForm.get("personalData.surname")?.hasError("required")
                    ? "Surname is required"
                    : "Maximum length is 15 characters!"
                }}
              </div>
            </ng-container>
          </div>
          <div class="form-element">
            <label >Phone Number</label>
            <input
              formControlName="phoneNumber"
              type="tel"
              [ngClass]="
                (registerForm.get('personalData.phoneNumber')?.dirty ||
                  form.submitted) &&
                !registerForm.get('personalData.phoneNumber')?.valid
                  ? 'is-invalid'
                  : ''
              "
            />
            <ng-container
              *ngIf="
                (registerForm.get('personalData.phoneNumber')?.dirty ||
                  form.submitted) &&
                !registerForm.get('personalData.phoneNumber')?.valid
              "
            >
              <div class="invalid-feedback">
                {{
                  registerForm
                    .get("personalData.phoneNumber")
                    ?.hasError("required")
                    ? "Surname is required"
                    : "Minimum length is 9 characters!"
                }}
              </div>
            </ng-container>
          </div>
        </div>
        <div class="form-button">
          <button type="submit">Register</button>
        </div>
    </form>
  </div>
</div>
